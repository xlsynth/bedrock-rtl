## Simulation Unit Test Scenarios
### File: ./cdc/rtl/br_cdc_fifo_flops_push_credit.sv

|Name|Description|
|---|---|
|BasicPushPopFunctionality|Check that the FIFO correctly handles push operations until it is full and pop operations until it is empty, ensuring proper synchronization and data integrity.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_rst` high to reset the FIFO and eventually deasserts it low to release the reset. The testbench monitors the reset state to ensure the FIFO is properly initialized.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench sets `credit_initial_push` to the default value of 2 and drives it to the design, ensuring the FIFO starts with the correct initial credit.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_valid` high with valid data on `push_data`, within the range determined by the `Width` parameter, and monitors `push_credit_stall`. The testbench waits for `push_credit_stall` to remain low, indicating the FIFO can accept data.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench continues to assert `push_valid` high with new data on `push_data` until the design eventually drives `push_full` high, indicating the FIFO is full. The testbench monitors `push_full` to confirm the FIFO's full condition.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `pop_ready` high and waits for the design to eventually drive `pop_valid` high, indicating valid data is available on `pop_data`. The testbench monitors `pop_valid` to ensure data availability.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench continues to assert `pop_ready` high until the design eventually drives `pop_empty` high, indicating the FIFO is empty. The testbench monitors `pop_empty` to confirm the FIFO's empty condition.  <br><br>|
|CreditManagementVerification|Check that the FIFO's credit management system correctly handles the allocation and withholding of credits during push operations, ensuring proper credit limits and updates to credit-related signals.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_rst` high for at least one full cycle of `push_clk` to reset the FIFO, then deasserts it low to release the reset. The testbench monitors the reset state to ensure proper initialization.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench drives `credit_initial_push` with the default value `Depth` to the design and monitors the design's response to ensure the initial credit is set correctly.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench drives `credit_withhold_push` with a specific value to the design and monitors the design's response to ensure the credit withholding is applied correctly.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_valid` high and drives random valid data on `push_data` using `$urandom_range(0, (1 << Width) - 1)`. The testbench waits for the design to drive `push_credit_stall` low, indicating the FIFO can accept data.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench monitors `credit_count_push` and `credit_available_push`, waiting for them to eventually update correctly based on the initial and withheld credits.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench continues to assert `push_valid` high and drives data until the testbench waits for the design to drive `push_full` high, indicating the FIFO is full.  <br><br>|
|ClockDomainSynchronization|Check that the FIFO correctly synchronizes data across different clock domains, maintaining data integrity and proper operation in asynchronous environments.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_rst` and `pop_rst` high to reset the FIFO, then deasserts them low to release the reset. The testbench monitors the reset signals to ensure they are correctly applied.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench provides clock signals on `push_clk` and `pop_clk` with different frequencies to simulate asynchronous operation, ensuring that the clocks are stable and correctly configured.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_valid` high with valid data on `push_data` of width `Width` and monitors `push_credit_stall`, waiting for it to remain low, indicating the FIFO can accept data. The testbench ensures that no data is written into the FIFO if `push_credit_stall` is high.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `pop_ready` high and waits for the design to assert `pop_valid` high, indicating valid data is available on `pop_data`. The testbench monitors `pop_data` to ensure it matches the expected synchronized data.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench continuously monitors `pop_valid` and `pop_data`, waiting for them to eventually reflect the synchronized data correctly, ensuring that the ready-valid handshake protocol is correctly implemented and data integrity is maintained.  <br><br>|
|BackpressureHandling|This scenario tests the FIFO's ability to handle backpressure by dynamically asserting and deasserting `push_credit_stall` and `pop_ready`, ensuring that the FIFO manages data flow without overflow or underflow.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench drives `push_rst` and `pop_rst` high to reset the FIFO and then low to release the reset.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench sets `credit_initial_push` to a default value and drives it to the design.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench drives `push_valid` high with valid data on `push_data` and dynamically asserts `push_credit_stall` to simulate backpressure.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench monitors `push_credit` and `push_full`, waiting for them to update correctly based on the stall condition.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench drives `pop_ready` high and dynamically deasserts it to simulate backpressure on the pop side.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench monitors `pop_valid` and `pop_empty`, waiting for them to update correctly based on the pop readiness.  <br><br>|
|CornerCaseCreditOverflow|This scenario tests the FIFO's response to a potential credit overflow condition by setting `credit_initial_push` and `credit_withhold_push` to values that could exceed `MaxCredit`, ensuring the FIFO does not accept more data than it can handle.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench drives `push_rst` high to reset the FIFO and then low to release the reset.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench sets `credit_initial_push` to a value close to `MaxCredit` and drives it to the design.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench sets `credit_withhold_push` to a value that, when combined with `credit_initial_push`, could exceed `MaxCredit`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench drives `push_valid` high with valid data on `push_data` and monitors `push_credit_stall`, waiting for it to assert, indicating the FIFO cannot accept more data.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench monitors `credit_count_push` and `credit_available_push`, waiting for them to remain within valid ranges, ensuring no overflow occurs.  <br><br>|
