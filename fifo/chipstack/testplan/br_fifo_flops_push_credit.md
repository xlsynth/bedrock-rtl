## Simulation Unit Test Scenarios
### File: ./fifo/rtl/br_fifo_flops_push_credit.sv

|Name|Description|
|---|---|
|BasicPushAndPop|Check that the FIFO correctly handles push and pop operations while maintaining data integrity and adhering to flow control protocols.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `rst` to reset the FIFO and waits for the design to eventually drive `empty` high, indicating the FIFO is empty. The testbench monitors `empty`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench deasserts `rst` and sets `credit_initial_push` to a value equal to `Depth`, allowing full utilization of the FIFO. The testbench drives `credit_initial_push`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_valid` and drives `push_data` with `constant_push_data`, monitoring `push_credit` to ensure credits are available. The testbench drives `push_valid` and `push_data`, and monitors `push_credit`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench waits for the design to eventually drive `full` high, indicating the FIFO is full. The testbench monitors `full`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `pop_ready` and waits for the design to eventually drive `pop_valid` high, indicating data is available for popping. The testbench drives `pop_ready` and monitors `pop_valid`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench reads `pop_data` and verifies it matches `constant_push_data`, ensuring data integrity. The testbench monitors `pop_data`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench waits for the design to eventually drive `empty` high again, indicating the FIFO is empty after all data is popped. The testbench monitors `empty`.  <br><br>|
|CreditManagementWithStall|Check that the FIFO's credit management functionality correctly handles credit stalls and updates credit counts accurately, focusing on the interaction between `push_credit_stall` and credit signals.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `rst` to reset the FIFO and waits for the design to drive `empty` high, indicating the FIFO is empty.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench deasserts `rst` and sets `credit_initial_push` to a value less than `Depth`, such as 5 if `Depth` is 10, to simulate limited initial credits.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_valid` and drives `push_data` with a constant random value generated using `$urandom_range(0, (1 << Width) - 1)`, while monitoring `push_credit` to ensure credits are available.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_credit_stall` and waits for the design to deassert `push_credit`, indicating that push operations are stalled due to the stall signal.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench deasserts `push_credit_stall` and waits for the design to assert `push_credit` again, indicating that credits are available and push operations can resume.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench verifies that `credit_count_push` increments when `push_credit` is asserted and `push_credit_stall` is deasserted, and decrements when `push_valid` is asserted. It also checks that `credit_available_push` is asserted when `credit_count_push` is greater than zero and deasserted when `credit_count_push` is zero, ensuring correct credit management throughout the process.  <br><br>|
|BypassModeVerification|Check that the FIFO correctly implements bypass mode functionality, allowing immediate data forwarding from `push_data` to `pop_data` with zero-cycle latency when the FIFO is empty.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `rst` to reset the FIFO and waits for the design to drive `empty` high, indicating the FIFO is empty.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench deasserts `rst` and waits for 2-3 clock cycles before setting `EnableBypass` to 1, enabling bypass mode.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `push_valid` and drives `push_data` with a valid data value of width `Width`.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `pop_ready` and waits for the design to drive `pop_valid` high in the same cycle, indicating immediate data availability due to bypass mode.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench reads `pop_data` and verifies it matches the driven `push_data`, confirming zero-cycle latency.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench repeats the process with different data values to ensure consistent bypass behavior, verifying that `pop_data` always matches the corresponding `push_data`.  <br><br>|
|FullAndEmptyStatusManagement|Check that the FIFO accurately manages full and empty status flags during push and pop operations, ensuring correct status updates.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `rst` to reset the FIFO and waits for the design to eventually drive `empty` high, indicating the FIFO is empty. The testbench monitors the `empty` signal.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench deasserts `rst`, asserts `push_valid`, and drives a constant value on `push_data` using `$urandom_range(0, (1 << Width) - 1)` until the FIFO is full. The testbench monitors the `full` signal.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench waits for the design to eventually drive `full` high, indicating the FIFO is full. The testbench monitors the `full` signal.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `pop_ready` to indicate readiness to receive data and waits for the design to eventually drive `pop_valid` high, indicating data is available for popping. The testbench monitors the `pop_valid` signal.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench continues to assert `pop_ready` and pops data until the FIFO is empty, waiting for the design to eventually drive `empty` high again. The testbench monitors the `empty` signal.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench verifies that `full_next` and `empty_next` signals are updated correctly throughout the process by monitoring these signals during the test.  <br><br>|
|SlotsAndItemsTracking|Check that the FIFO accurately tracks its occupancy and available space during push and pop operations.  <br><br> <h3>Steps</h3><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `rst` for at least two clock cycles to reset the FIFO and waits for the design to eventually drive `empty` high, indicating the FIFO is empty.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench deasserts `rst`, asserts `push_valid` for at least one clock cycle, and drives `push_data` with a valid data word of `Width` bits. The testbench monitors `slots` to ensure it decreases by one in the next clock cycle when `push_ready` is high.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench waits for the design to eventually drive `full` high, indicating the FIFO is full and `slots` is zero.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench asserts `pop_ready` and waits for the design to drive `pop_valid` high in the same cycle, indicating data is available for popping.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench continues to assert `pop_ready` and pops data while monitoring `items` to ensure it decreases by one in the next clock cycle when both `pop_ready` and `pop_valid` are high.  <br><br>&nbsp;&nbsp;&nbsp; - The testbench waits for the design to eventually drive `empty` high again, indicating the FIFO is empty and `items` is zero.  <br><br>|
